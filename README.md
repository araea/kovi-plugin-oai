kovi-plugin-oai
===============

[<img alt="github" src="https://img.shields.io/badge/github-araea/kovi__plugin__oai-8da0cb?style=for-the-badge&labelColor=555555&logo=github" height="20">](https://github.com/araea/kovi-plugin-oai)
[<img alt="crates.io" src="https://img.shields.io/crates/v/kovi-plugin-oai.svg?style=for-the-badge&color=fc8d62&logo=rust" height="20">](https://crates.io/crates/kovi-plugin-oai)

Kovi çš„ OpenAI å…¼å®¹ API èŠå¤©æ’ä»¶ã€‚æ”¯æŒå¤šæ™ºèƒ½ä½“ç®¡ç†ã€ç¬¦å·æŒ‡ä»¤ç³»ç»Ÿã€å›¾ç‰‡è¯†åˆ«ä¸ç”Ÿæˆã€‚

## ç‰¹æ€§

- ğŸ¤– **å¤šæ™ºèƒ½ä½“ç®¡ç†** - åˆ›å»ºã€å¤åˆ¶ã€åˆ é™¤ã€é…ç½®å¤šä¸ªæ™ºèƒ½ä½“
- ğŸ’¬ **å¯¹è¯æ¨¡å¼** - æ”¯æŒå…¬æœ‰/ç§æœ‰å¯¹è¯ï¼Œç‹¬ç«‹å†å²è®°å½•
- ğŸ–¼ï¸ **å¤šæ¨¡æ€æ”¯æŒ** - å›¾ç‰‡è¯†åˆ«ã€å›¾ç‰‡ç”Ÿæˆã€è‡ªåŠ¨é¢„è§ˆ
- ğŸ“ **æ–‡æœ¬/å›¾ç‰‡è¾“å‡º** - è‡ªç”±åˆ‡æ¢ Markdown æ¸²æŸ“æˆ–çº¯æ–‡æœ¬
- ğŸ“š **å†å²ç®¡ç†** - æŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤ã€å¯¼å‡ºå¯¹è¯è®°å½•
- âš¡ **ç¬¦å·æŒ‡ä»¤** - ç®€æ´é«˜æ•ˆçš„æŒ‡ä»¤è¯­æ³•

## å‰ç½®

1. åˆ›å»º Kovi é¡¹ç›®
2. æ‰§è¡Œ `cargo kovi add oai`
3. åœ¨ `src/main.rs` ä¸­æ·»åŠ  `kovi_plugin_oai`

## å¿«é€Ÿå¼€å§‹

1. å‘é€ `APIåœ°å€ APIå¯†é’¥` é…ç½® APIï¼ˆå¦‚ `https://api.openai.com/v1 sk-xxx`ï¼‰
2. å‘é€ `#åŠ©æ‰‹ gpt-4o ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„åŠ©æ‰‹` åˆ›å»ºæ™ºèƒ½ä½“
3. å‘é€ `åŠ©æ‰‹ ä½ å¥½` å¼€å§‹å¯¹è¯
4. å‘é€ `oai` æŸ¥çœ‹å®Œæ•´å¸®åŠ©

## æŒ‡ä»¤é€ŸæŸ¥

### æ¨¡å¼å‰ç¼€ï¼ˆå¯ç»„åˆï¼‰

| ç¬¦å· | å«ä¹‰ |
|:---:|------|
| `&` | ç§æœ‰æ¨¡å¼ï¼ˆç‹¬ç«‹å†å²ï¼‰ |
| `"` | æ–‡æœ¬æ¨¡å¼ï¼ˆä¸æ¸²æŸ“å›¾ç‰‡ï¼‰ |

### æ™ºèƒ½ä½“ç®¡ç†

| æŒ‡ä»¤ | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|
| `##åç§° æ¨¡å‹ æç¤ºè¯` | åˆ›å»º/æ›´æ–° | `##åŠ©æ‰‹ gpt-4o ä½ æ˜¯åŠ©æ‰‹` |
| `æ™ºèƒ½ä½“~=æ–°å` | é‡å‘½å | `åŠ©æ‰‹~=ç®¡å®¶` |
| `æ™ºèƒ½ä½“~#æ–°å` | å¤åˆ¶ | `åŠ©æ‰‹~#åŠ©æ‰‹2` |
| `æ™ºèƒ½ä½“:æè¿°` | è®¾ç½®æè¿° | `åŠ©æ‰‹:é€šç”¨åŠ©æ‰‹` |
| `-#åç§°` | åˆ é™¤ | `-#åŠ©æ‰‹` |
| `/#` | åˆ—è¡¨ | `/#` |

### é…ç½®ä¿®æ”¹

| æŒ‡ä»¤ | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|
| `æ™ºèƒ½ä½“%æ¨¡å‹` | ä¿®æ”¹æ¨¡å‹ | `åŠ©æ‰‹%gpt-4` |
| `æ™ºèƒ½ä½“$æç¤ºè¯` | ä¿®æ”¹æç¤ºè¯ | `åŠ©æ‰‹$ä½ æ˜¯...` |
| `æ™ºèƒ½ä½“$` | æ¸…ç©ºæç¤ºè¯ | `åŠ©æ‰‹$` |
| `æ™ºèƒ½ä½“/$` | æŸ¥çœ‹æç¤ºè¯ | `åŠ©æ‰‹/$` |
| `/%` | æ¨¡å‹åˆ—è¡¨ | `/%` |

### å¯¹è¯æ§åˆ¶

| æŒ‡ä»¤ | åŠŸèƒ½ |
|------|------|
| `æ™ºèƒ½ä½“ å†…å®¹` | å¯¹è¯ |
| `"æ™ºèƒ½ä½“ å†…å®¹` | æ–‡æœ¬æ¨¡å¼å¯¹è¯ |
| `&æ™ºèƒ½ä½“ å†…å®¹` | ç§æœ‰å¯¹è¯ |
| `æ™ºèƒ½ä½“~` | é‡æ–°ç”Ÿæˆ |
| `æ™ºèƒ½ä½“!` | åœæ­¢ç”Ÿæˆ |

### å†å²ç®¡ç†

| æŒ‡ä»¤ | åŠŸèƒ½ |
|------|------|
| `æ™ºèƒ½ä½“/*` | æŸ¥çœ‹æ‰€æœ‰ |
| `æ™ºèƒ½ä½“/1` | æŸ¥çœ‹ç¬¬1æ¡ |
| `æ™ºèƒ½ä½“/1-5` | æŸ¥çœ‹1-5æ¡ |
| `æ™ºèƒ½ä½“_*` | å¯¼å‡º(.txt) |
| `æ™ºèƒ½ä½“'1 æ–°å†…å®¹` | ç¼–è¾‘ç¬¬1æ¡ |
| `æ™ºèƒ½ä½“-1` | åˆ é™¤ç¬¬1æ¡ |
| `æ™ºèƒ½ä½“-1,3,5` | åˆ é™¤å¤šæ¡ |
| `æ™ºèƒ½ä½“-1-5` | åˆ é™¤èŒƒå›´ |
| `æ™ºèƒ½ä½“-*` | æ¸…ç©ºå†å² |

> ğŸ’¡ åŠ  `&` å‰ç¼€æ“ä½œç§æœ‰å†å²ï¼Œå¦‚ `&æ™ºèƒ½ä½“/*`

### å±é™©æ“ä½œ

| æŒ‡ä»¤ | åŠŸèƒ½ |
|------|------|
| `-*` | æ¸…ç©ºæ‰€æœ‰æ™ºèƒ½ä½“å…¬æœ‰å†å² |
| `-*!` | æ¸…ç©ºæ‰€æœ‰å†å² |

## é…ç½®

èµ„æºç›®å½•ï¼š`data/kovi-plugin-oai/*`

> é¦–æ¬¡è¿è¡Œæ—¶è‡ªåŠ¨ç”Ÿæˆã€‚

### `config.json` - æ’ä»¶é…ç½®

```json
{
  "api_base": "https://api.openai.com/v1",
  "api_key": "sk-xxx",
  "models": [],
  "agents": [],
  "default_model": "gpt-4o",
  "default_prompt": "You are a helpful assistant."
}
```

| å­—æ®µ | è¯´æ˜ |
|------|------|
| `api_base` | API åŸºç¡€åœ°å€ |
| `api_key` | API å¯†é’¥ |
| `models` | ç¼“å­˜çš„æ¨¡å‹åˆ—è¡¨ |
| `agents` | æ™ºèƒ½ä½“åˆ—è¡¨ |
| `default_model` | é»˜è®¤æ¨¡å‹ |
| `default_prompt` | é»˜è®¤ç³»ç»Ÿæç¤ºè¯ |

## å…¼å®¹æ€§

æ”¯æŒæ‰€æœ‰ OpenAI å…¼å®¹çš„ API æœåŠ¡ï¼š

- OpenAI
- Claude (via API proxy)
- Gemini (via API proxy)
- DeepSeek
- Qwen (é€šä¹‰åƒé—®)
- GLM (æ™ºè°±)
- Kimi (æœˆä¹‹æš—é¢)
- å…¶ä»–å…¼å®¹æœåŠ¡...

## è‡´è°¢

- [Kovi](https://kovi.threkork.com/)
- [async-openai](https://github.com/64bit/async-openai)
- [cdp-html-shot](https://crates.io/crates/cdp-html-shot)

<br>

#### License

<sup>
Licensed under either of <a href="LICENSE-APACHE">Apache License, Version
2.0</a> or <a href="LICENSE-MIT">MIT license</a> at your option.
</sup>

<br>

<sub>
Unless you explicitly state otherwise, any contribution intentionally submitted
for inclusion in this crate by you, as defined in the Apache-2.0 license, shall
be dual licensed as above, without any additional terms or conditions.
</sub>
